package html

import "github.com/tylander732/weeklyAutoPlanner/pkg/model"
import "strconv"

templ ingredients(categoryName string, ingredients map[string]int) {
	<tr>
		<th>{ categoryName }</th>
		<th>
			for name, count := range ingredients {
				{ name } { strconv.Itoa(count) } &#10;&#13;
			}
		</th>
	</tr>
}

templ hello(receiver string) {
	<h1>Hello, { receiver }!</h1>
}

//TODO: Dynamically create html for meal details
templ Email(data model.EmailData) {
	<!DOCTYPE html>
	<html lang="en">
		<head>
			<meta charset="UTF-8"/>
			<title>Weekly Meals</title>
			<style>
		table {
			border-collapse: collapse;
			width: 100%;
			font-family: Arial, sans-serif;
		}

		table-small {
			border-collapse: collapse;
			width: 100%;
			font-family: Arial, sans-serif;
		}

		table th,
		table td {
			border: 1px solid #ccc;
			padding: 8px 12px;
			text-align: left;
		}

		table th {
			background-color: #f4f4f4;
			font-weight: bold;
		}
	</style>
		</head>
		<body>
			@hello(data.Receiver)
			<h1>Meals for this week:</h1>
			for _, meal := range data.Meals {
				<div>
					{ meal }
				</div>
			}
			<table>
				<tr>
					<th>Grocery Type</th>
					<th>Items</th>
				</tr>
				@ingredients("Produce", data.AllIngredients.Produce)
				@ingredients("Meat and Poultry", data.AllIngredients.MeatAndPoultry)
				@ingredients("Seafood", data.AllIngredients.Seafood)
				@ingredients("Dairy", data.AllIngredients.Dairy)
				@ingredients("Bakery", data.AllIngredients.Bakery)
				@ingredients("Frozen Foods", data.AllIngredients.FrozenFoods)
				@ingredients("Pantry Staples", data.AllIngredients.PantryStaples)
				@ingredients("Beverages", data.AllIngredients.Beverages)
				@ingredients("Snacks", data.AllIngredients.Snacks)
				@ingredients("Household Goods", data.AllIngredients.HouseholdGoods)
				@ingredients("Personal Care", data.AllIngredients.PersonalCare)
				@ingredients("International Foods", data.AllIngredients.InternationalFoods)
				@ingredients("Deli", data.AllIngredients.Deli)
				@ingredients("Floral", data.AllIngredients.Floral)
				@ingredients("Unsorted", data.AllIngredients.Unsorted)
			</table>
		</body>
	</html>
}
